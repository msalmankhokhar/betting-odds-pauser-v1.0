<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Betting Odds - Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .header {
            background-color: #1976d2;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .match-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .teams {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        
        .live-indicator {
            background-color: #f44336;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .odds-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .odds-card {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .odds-card:hover {
            border-color: #007bff;
            transform: translateY(-2px);
        }
        
        .odds-title {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .odds-value {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
            margin: 5px 0;
        }
        
        .odds-change {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 12px;
        }
        
        .odds-up {
            background-color: #d4edda;
            color: #155724;
        }
        
        .odds-down {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .fancy-section {
            margin-top: 30px;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .fancy-header {
            background-color: #ff9800;
            color: white;
            padding: 10px 20px;
            margin: -20px -20px 20px -20px;
            border-radius: 10px 10px 0 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .fancy-odds {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .fancy-item {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            background-color: #fafafa;
        }
        
        .fancy-name {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        .fancy-rate {
            display: flex;
            justify-content: space-between;
        }
        
        .back-rate, .lay-rate {
            background-color: #007bff;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .lay-rate {
            background-color: #dc3545;
        }
        
        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="status-indicator" id="updateStatus">
        üîÑ Odds Updating Live
    </div>
    
    <div class="header">
        <h1>üèè Cricket Betting Exchange</h1>
        <p>Live Odds & Fancy Betting</p>
    </div>
    
    <!-- Match 1 -->
    <div class="match-container">
        <div class="match-header">
            <div class="teams">India vs Pakistan - T20 World Cup Final</div>
            <div class="live-indicator">‚óè LIVE</div>
        </div>
        
        <div class="odds-container">
            <div class="odds-card">
                <div class="odds-title">India Win</div>
                <div class="odds-value" id="india-odds">1.85</div>
                <div class="odds-change odds-up" id="india-change">+0.02</div>
            </div>
            
            <div class="odds-card">
                <div class="odds-title">Pakistan Win</div>
                <div class="odds-value" id="pakistan-odds">2.10</div>
                <div class="odds-change odds-down" id="pakistan-change">-0.05</div>
            </div>
            
            <div class="odds-card">
                <div class="odds-title">Draw/Tie</div>
                <div class="odds-value" id="draw-odds">15.00</div>
                <div class="odds-change odds-up" id="draw-change">+0.50</div>
            </div>
        </div>
    </div>
    
    <!-- Fancy Betting Section -->
    <div class="fancy-section">
        <div class="fancy-header">
            üéØ Fancy Betting - Live Rates
        </div>
        
        <div class="fancy-odds">
            <div class="fancy-item">
                <div class="fancy-name">Total Runs in 1st Over</div>
                <div class="fancy-rate">
                    <span class="back-rate" id="over1-back">8.5</span>
                    <span class="lay-rate" id="over1-lay">9.5</span>
                </div>
            </div>
            
            <div class="fancy-item">
                <div class="fancy-name">Total Sixes in Match</div>
                <div class="fancy-rate">
                    <span class="back-rate" id="sixes-back">12.0</span>
                    <span class="lay-rate" id="sixes-lay">13.0</span>
                </div>
            </div>
            
            <div class="fancy-item">
                <div class="fancy-name">Highest Opening Partnership</div>
                <div class="fancy-rate">
                    <span class="back-rate" id="partnership-back">45.5</span>
                    <span class="lay-rate" id="partnership-lay">47.5</span>
                </div>
            </div>
            
            <div class="fancy-item">
                <div class="fancy-name">Man of the Match</div>
                <div class="fancy-rate">
                    <span class="back-rate" id="motm-back">3.2</span>
                    <span class="lay-rate" id="motm-lay">3.8</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Simulate real-time odds updates
        let oddsData = {
            india: 1.85,
            pakistan: 2.10,
            draw: 15.00,
            over1Back: 8.5,
            over1Lay: 9.5,
            sixesBack: 12.0,
            sixesLay: 13.0,
            partnershipBack: 45.5,
            partnershipLay: 47.5,
            motmBack: 3.2,
            motmLay: 3.8
        };
        
        // Timer IDs for testing
        let mainUpdateTimer;
        let fastUpdateTimer;
        let slowUpdateTimer;
        
        function getRandomChange() {
            return (Math.random() - 0.5) * 0.1; // Random change between -0.05 and +0.05
        }
        
        function updateOdds() {
            // Update main match odds
            oddsData.india += getRandomChange();
            oddsData.pakistan += getRandomChange();
            oddsData.draw += getRandomChange() * 2;
            
            // Update fancy betting odds
            oddsData.over1Back += getRandomChange() * 0.5;
            oddsData.over1Lay += getRandomChange() * 0.5;
            oddsData.sixesBack += getRandomChange() * 0.3;
            oddsData.sixesLay += getRandomChange() * 0.3;
            
            // Update DOM elements
            document.getElementById('india-odds').textContent = oddsData.india.toFixed(2);
            document.getElementById('pakistan-odds').textContent = oddsData.pakistan.toFixed(2);
            document.getElementById('draw-odds').textContent = oddsData.draw.toFixed(2);
            
            document.getElementById('over1-back').textContent = oddsData.over1Back.toFixed(1);
            document.getElementById('over1-lay').textContent = oddsData.over1Lay.toFixed(1);
            document.getElementById('sixes-back').textContent = oddsData.sixesBack.toFixed(1);
            document.getElementById('sixes-lay').textContent = oddsData.sixesLay.toFixed(1);
            
            console.log('Odds updated at:', new Date().toLocaleTimeString());
        }
        
        function updateFancyRates() {
            // Update fancy betting rates more frequently
            oddsData.partnershipBack += getRandomChange() * 2;
            oddsData.partnershipLay += getRandomChange() * 2;
            oddsData.motmBack += getRandomChange() * 0.2;
            oddsData.motmLay += getRandomChange() * 0.2;
            
            document.getElementById('partnership-back').textContent = oddsData.partnershipBack.toFixed(1);
            document.getElementById('partnership-lay').textContent = oddsData.partnershipLay.toFixed(1);
            document.getElementById('motm-back').textContent = oddsData.motmBack.toFixed(1);
            document.getElementById('motm-lay').textContent = oddsData.motmLay.toFixed(1);
            
            console.log('Fancy rates updated at:', new Date().toLocaleTimeString());
        }
        
        function slowUpdate() {
            // Simulate slower background updates
            document.title = 'Cricket Betting - ' + new Date().toLocaleTimeString();
            console.log('Background update at:', new Date().toLocaleTimeString());
        }
        
        // Start multiple timers to simulate real betting website behavior
        function startOddsUpdates() {
            console.log('Starting odds update timers...');
            
            // Main odds update every 2 seconds
            mainUpdateTimer = setInterval(updateOdds, 2000);
            
            // Fancy rates update every 1.5 seconds  
            fastUpdateTimer = setInterval(updateFancyRates, 1500);
            
            // Background updates every 5 seconds
            slowUpdateTimer = setInterval(slowUpdate, 5000);
            
            // Update status indicator
            document.getElementById('updateStatus').textContent = 'üîÑ Odds Updating Live';
            document.getElementById('updateStatus').style.backgroundColor = '#28a745';
        }
          // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Test betting page loaded');
            startOddsUpdates();
            
            // Initial odds update
            updateOdds();
            updateFancyRates();
        });
        
        // Listen for extension resume event
        window.addEventListener('oddsTimersResumed', function() {
            console.log('Extension resumed timers, restarting odds updates...');
            // Clear any existing timers first
            if (mainUpdateTimer) clearInterval(mainUpdateTimer);
            if (fastUpdateTimer) clearInterval(fastUpdateTimer);
            if (slowUpdateTimer) clearInterval(slowUpdateTimer);
            
            // Restart all timers
            startOddsUpdates();
        });
        
        // Listen for when timers are paused/resumed by extension
        let originalSetInterval = window.setInterval;
        let timerCount = 0;
        
        window.setInterval = function(callback, delay) {
            timerCount++;
            console.log('New timer created, total:', timerCount);
            return originalSetInterval.call(window, callback, delay);
        };
        
    </script>
</body>
</html>
